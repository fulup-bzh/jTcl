<HEAD>
<TITLE>dselect</TITLE>
<SCRIPT>
//---------------------------------------------------
// Application 	: dselect.html
// Fichier 	: dselect.html
// Auteur 	: JM Inglebert - IUT de Vannes
// Mail 	: Jean-Michel.Inglebert@iu-vannes.fr
// Pour l'utiliser tu dois modifier la ligne suivante dans L1.htm et  L2.htm
// nextDatas = "file:///C:/JMI/E/DHTML/L2.htm"
//---------------------------------------------------

var debug = true

//--
// Construit dans la première frame une interface
// paramétrée par les données de la seconde frame
//--
</SCRIPT>

</HEAD>
<SCRIPT>
 if (debug) 
  { document.write("<FRAMESET ROWS='100%,10%'>") }
 else  
  { document.write("<FRAMESET ROWS='100%,1%'>") }
</SCRIPT>

   <FRAME SRC=select.htm NAME="selectFrame">
   <FRAME SRC=l1.htm NAME="dataFrame">
</FRAMESET>


--------------626AC481A9C64C47217B2B66
Content-Type: text/html; charset=iso-8859-1; name="l1.htm"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline; filename="l1.htm"
Content-Base: "file:///C|/JMI/E/DHTML/l1.htm"

<HTML>
<HEAD>
<SCRIPT>
//---------------------------------------------------
// Application 	: dselect.htm
// Fichier 	: l1.htm
// Auteur 	: JM Inglebert - IUT de Vannes
// Mail 	: Jean-Michel.Inglebert@iu-vannes.fr
//---------------------------------------------------

var debug = false

//=============
// UTILITAIRES
//=============

function afficheTab(tab)
// tab : tableau à afficher
// --
// Affiche tous les éléments du tableau tab
// dans la fenêtre courante
// --
{
  for (var i = 0; i < tab.length; i++)  
   {
    document.write(tab[i],"-")
   }
  document.write("<BR>")
}

//=======================
// DONNEES et PROCEDURES
//=======================

// les items de l'élément select
tabItems = new Array("L1","Brest","Lorient","Rennes","Vannes")

if (debug) {afficheTab(tabItems)}

// les noms des boutons
tabButtons = new Array("L1.button1","L1.button2","fClientl1")
// et leurs proc de réaction
tabFButtons = new Array("alert","confirm","fClientl1")

// le fichier de datas suivant
nextDatas = "file:///C:/JMI/E/DHTML/L2.htm"

</SCRIPT>
</HEAD>

<BODY>
 <H2>L1.htm : Fichier de données d'initialisation d'interface</H2>
</BODY>
</HTML>

<SCRIPT>
//==============================
// ACTIONS DE FIN DE CHARGEMENT
//==============================

 // 
 // synchronise la MAJ en fin de chargement
 // par un reload de la frame "client"
 parent.frames[0].location=parent.frames[0].location
</SCRIPT>
--------------626AC481A9C64C47217B2B66
Content-Type: text/html; charset=iso-8859-1; name="l2.htm"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline; filename="l2.htm"
Content-Base: "file:///C|/JMI/E/DHTML/l2.htm"

<HTML>
<HEAD>
<SCRIPT>
//---------------------------------------------------
// Application 	: dselect.htm
// Fichier 	: l2.htm
// Auteur 	: JM Inglebert - IUT de Vannes
// Mail 	: Jean-Michel.Inglebert@iu-vannes.fr
//---------------------------------------------------

var debug = false

//=============
// UTILITAIRES
//=============

function afficheTab(tab)
// tab : tableau à afficher
// --
// Affiche tous les éléments du tableau tab
// dans la fenêtre courante
// --
{
  for (var i = 0; i < tab.length; i++)  
   {
    document.write(tab[i],"-")
   }
  document.write("<BR>")
}

//=======================
// DONNEES et PROCEDURES
//=======================

// les items de l'élément select
tabItems = new Array("L2","Paris","Lyon","Marseille")

if (debug) {afficheTab(tabItems)}

// les noms des boutons
tabButtons = new Array("L2.button1","L2.button2","fClientl2")
// et leurs proc de réaction
tabFButtons = new Array("confirm","alert","fClientl2")

// le fichier de datas suivant
nextDatas = "file:///C:/JMI/E/DHTML/L1.htm"

</SCRIPT>
</HEAD>

<BODY>
 <H2>L2.htm : Fichier de données d'initialisation d'interface</H2>
</BODY>
</HTML>

<SCRIPT>
//==============================
// ACTIONS DE FIN DE CHARGEMENT
//==============================

 // 
 // synchronise la MAJ en fin de chargement
 // par un reload de la frame "client"
 parent.frames[0].location=parent.frames[0].location
</SCRIPT>
--------------626AC481A9C64C47217B2B66
Content-Type: text/html; charset=iso-8859-1; name="select.htm"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline; filename="select.htm"
Content-Base: "file:///C|/JMI/E/DHTML/select.htm"

<HTML>
<HEAD>
<SCRIPT>
//---------------------------------------------------
// Application 	: dselect.htm
// Fichier 	: select.htm
// Auteur 	: JM Inglebert - IUT de Vannes
// Mail 	: Jean-Michel.Inglebert@iu-vannes.fr
//---------------------------------------------------

var debug = false

//=============
// UTILITAIRES
//=============

function afficheTab(tab)
// tab : tableau à afficher
// --
// Affiche tous les éléments du tableau tab
// dans la fenêtre courante
// --
{
  for (var i = 0; i < tab.length; i++)  
   {
    document.write(tab[i],"-")
   }
  document.write("<BR>")
}

//=================================
// DONNEES et PROCEDURES LOCALES
//=================================

// les items de l'élément select
tabItems = new Array("client","Ville1","Ville2")

if (debug) {afficheTab(tabItems)}

// les noms des boutons
tabButtons = new Array("button1","button2")
// et leurs proc de réaction
tabFButtons = new Array("alert","confirm")

function fClientl1(form)
// form : form contenant le bouton déclenchant
// --
// Affiche le nombre d'éléments de la forme courante
// --
{
 alert("j'ai " + form.length + " éléments")
}

function fClientl2(form)
// form : form contenant le bouton déclenchant
// --
// Affiche l'url courante
// --
{
 alert("url client = " + document.location )
}

//============================================================
// PROCEDURES DE CONSTRUCTION/MAJ DE L'INTERFACE CLIENT
//============================================================

function doSelect(tab,name,isel){
// tab  # tableau des noms des items de la liste
// name # nom de l'élément SELECT
// isel # indice de l'élément pré-sélectionné -- A FAIRE --

// --
// Construit un élément de type SELECT
// où les items sont les éléments du tableau tab
// --

 document.write("<SELECT NAME=",name," MULTIPLE>")
 for (var i = 0; i<tab.length ; i++){
  document.write("<OPTION> ", tab[i])
 }
 document.write("</SELECT>")
}

function doButtons(tab,tabf){
// tab   # tableau des noms des boutons
// tabf  # tableau des noms des procédures de réaction

// --
// Construit autant de boutons qu'il existe
// d'éléments dans le tableau tab et leur
// associe la procédure correspondante dans tabf
// qui sera appelée avec la forme englobante
// --

 for (var i = 0; i<tab.length ; i++){
  document.write("<INPUT TYPE='button' VALUE='", tab[i])
  document.write("' onClick='",tabf[i],"(this.form)'>")
 }
}

function majButtons(tab){
// tab   # tableau des noms des boutons

// --
// Modifie les noms des boutons de la form F0
// par les éléments du tableau tab
// --

 for (var i = 0; i<tab.length ; i++){
  top.frames[0].document.F0.elements[i].value=tab[i]
 }
}


function reload(){
// --
// Recharge le fichier courant (le client)
// --

 parent.frames[0].location=parent.frames[0].location
}

function nextDataUrl(){
// --
// Charge le prochain fichier de données
// dont le nom est dans la variable nextDatas
// --

 parent.frames[1].location=parent.frames[1].nextDatas
}
</SCRIPT>


</HEAD>

<BODY>
<H1> Commandes de test </H1>
 <FORM>
  <INPUT TYPE="button" VALUE="majDatas"
   onClick="nextDataUrl()">
  <INPUT TYPE="button" VALUE="reload Client"
   onClick="reload()">
  <INPUT TYPE="button" VALUE="maj boutons sans reload"
   onClick="majButtons(tabButtons)"><BR>
 </FORM>

<H1> Interface Client Dynamique </H1>
L'interface est construite à partir de données locales
et à partir de données récupérées via l'url de la frame
de bas de page.<BR>
Les noms des boutons et leur procédure de réaction
sont dynamiquement modifiées, seul les noms sont
modifiés pour les items de listes.

<SCRIPT>
//==============================
// CREATION DE L'INTERFACE
//==============================

 document.write("<FORM NAME='F0'>")
  doButtons(top.frames[1].tabButtons,top.frames[1].tabFButtons,"x")
  document.write("<BR>")
  doButtons(tabButtons,tabFButtons,"x")
 document.write("</FORM>")

 if (debug) {afficheTab(top.frames[0].tabItems)}
 if (debug) {afficheTab(top.frames[1].tabItems)}

 document.write("<FORM NAME='F1'>")
  doSelect(top.frames[1].tabItems,"url")
  doSelect(tabItems,"local")
  // sélectionne un item
  document.F1.url.options[1].selected=true
  document.F1.local.options[2].selected=true
 document.write("</FORM>")

 document.write(parent.frames[0].location,"<BR>")
</SCRIPT>

</BODY>
</HTML>

--------------626AC481A9C64C47217B2B66--

